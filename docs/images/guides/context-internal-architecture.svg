<svg xmlns="http://www.w3.org/2000/svg" width="800" height="400" viewBox="0 0 800 400">
  <!-- Background -->
  <rect width="800" height="400" fill="#FFFFFF"/>

  <!-- ContextOrchestrator box -->
  <rect x="250" y="14" width="300" height="50" rx="6" ry="6" fill="#1A73E8" stroke="#424242" stroke-width="1.5"/>
  <text x="400" y="35" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFFFFF">ContextOrchestrator</text>
  <text x="400" y="53" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="rgba(255,255,255,0.85)">event routing</text>

  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#616161"/>
    </marker>
  </defs>

  <!-- Arrows from orchestrator to threads -->
  <line x1="310" y1="64" x2="140" y2="100" stroke="#616161" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="400" y1="64" x2="400" y2="100" stroke="#616161" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="490" y1="64" x2="660" y2="100" stroke="#616161" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- ============ Thread 1: ingest ============ -->
  <rect x="24" y="104" width="230" height="228" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <!-- Header -->
  <rect x="24" y="104" width="230" height="30" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="24" y="120" width="230" height="14" fill="#1A73E8"/>
  <text x="139" y="124" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFFFFF">OS Thread #1</text>

  <!-- Tokio RT box -->
  <rect x="40" y="144" width="198" height="28" rx="4" ry="4" fill="#FFFFFF" stroke="#424242" stroke-width="1"/>
  <text x="139" y="163" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#757575">Tokio RT (single-threaded)</text>

  <!-- Engine box -->
  <rect x="40" y="180" width="198" height="80" rx="4" ry="4" fill="#FFFFFF" stroke="#424242" stroke-width="1"/>
  <text x="139" y="198" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#212121">Engine</text>
  <!-- streams sub-box -->
  <rect x="52" y="206" width="82" height="22" rx="3" ry="3" fill="#E8F0FE" stroke="#424242" stroke-width="0.75"/>
  <text x="93" y="221" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">streams</text>
  <!-- state sub-box -->
  <rect x="144" y="206" width="82" height="22" rx="3" ry="3" fill="#E8F0FE" stroke="#424242" stroke-width="0.75"/>
  <text x="185" y="221" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">state</text>
  <!-- Engine bottom line -->
  <line x1="52" y1="238" x2="226" y2="238" stroke="#424242" stroke-width="0.5" stroke-dasharray="3,2"/>
  <text x="139" y="252" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#757575">compiled ops</text>

  <!-- Context and cores labels -->
  <text x="56" y="282" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#212121">ctx: <tspan font-weight="bold">ingest</tspan></text>
  <text x="56" y="300" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#757575">cores: </text>
  <text x="97" y="300" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#1A73E8">[1]</text>

  <!-- ============ Thread 2: analyze ============ -->
  <rect x="285" y="104" width="230" height="228" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <!-- Header -->
  <rect x="285" y="104" width="230" height="30" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="285" y="120" width="230" height="14" fill="#1A73E8"/>
  <text x="400" y="124" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFFFFF">OS Thread #2</text>

  <!-- Tokio RT box -->
  <rect x="301" y="144" width="198" height="28" rx="4" ry="4" fill="#FFFFFF" stroke="#424242" stroke-width="1"/>
  <text x="400" y="163" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#757575">Tokio RT (single-threaded)</text>

  <!-- Engine box -->
  <rect x="301" y="180" width="198" height="80" rx="4" ry="4" fill="#FFFFFF" stroke="#424242" stroke-width="1"/>
  <text x="400" y="198" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#212121">Engine</text>
  <!-- streams sub-box -->
  <rect x="313" y="206" width="82" height="22" rx="3" ry="3" fill="#E8F0FE" stroke="#424242" stroke-width="0.75"/>
  <text x="354" y="221" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">streams</text>
  <!-- state sub-box -->
  <rect x="405" y="206" width="82" height="22" rx="3" ry="3" fill="#E8F0FE" stroke="#424242" stroke-width="0.75"/>
  <text x="446" y="221" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">state</text>
  <!-- Engine bottom line -->
  <line x1="313" y1="238" x2="487" y2="238" stroke="#424242" stroke-width="0.5" stroke-dasharray="3,2"/>
  <text x="400" y="252" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#757575">compiled ops</text>

  <!-- Context and cores labels -->
  <text x="317" y="282" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#212121">ctx: <tspan font-weight="bold">analyze</tspan></text>
  <text x="317" y="300" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#757575">cores: </text>
  <text x="358" y="300" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#1A73E8">[2]</text>

  <!-- ============ Thread 3: alert ============ -->
  <rect x="546" y="104" width="230" height="228" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <!-- Header -->
  <rect x="546" y="104" width="230" height="30" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="546" y="120" width="230" height="14" fill="#1A73E8"/>
  <text x="661" y="124" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFFFFF">OS Thread #3</text>

  <!-- Tokio RT box -->
  <rect x="562" y="144" width="198" height="28" rx="4" ry="4" fill="#FFFFFF" stroke="#424242" stroke-width="1"/>
  <text x="661" y="163" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#757575">Tokio RT (single-threaded)</text>

  <!-- Engine box -->
  <rect x="562" y="180" width="198" height="80" rx="4" ry="4" fill="#FFFFFF" stroke="#424242" stroke-width="1"/>
  <text x="661" y="198" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#212121">Engine</text>
  <!-- streams sub-box -->
  <rect x="574" y="206" width="82" height="22" rx="3" ry="3" fill="#E8F0FE" stroke="#424242" stroke-width="0.75"/>
  <text x="615" y="221" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">streams</text>
  <!-- state sub-box -->
  <rect x="666" y="206" width="82" height="22" rx="3" ry="3" fill="#E8F0FE" stroke="#424242" stroke-width="0.75"/>
  <text x="707" y="221" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">state</text>
  <!-- Engine bottom line -->
  <line x1="574" y1="238" x2="748" y2="238" stroke="#424242" stroke-width="0.5" stroke-dasharray="3,2"/>
  <text x="661" y="252" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#757575">compiled ops</text>

  <!-- Context and cores labels -->
  <text x="578" y="282" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#212121">ctx: <tspan font-weight="bold">alert</tspan></text>
  <text x="578" y="300" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" fill="#757575">cores: </text>
  <text x="619" y="300" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#1A73E8">[3]</text>

  <!-- Lines from threads down to channel bar -->
  <line x1="139" y1="332" x2="139" y2="352" stroke="#616161" stroke-width="1.5"/>
  <line x1="400" y1="332" x2="400" y2="352" stroke="#616161" stroke-width="1.5"/>
  <line x1="661" y1="332" x2="661" y2="352" stroke="#616161" stroke-width="1.5"/>

  <!-- mpsc channels bar -->
  <rect x="60" y="352" width="680" height="34" rx="6" ry="6" fill="#FFFFFF" stroke="#424242" stroke-width="1.5" stroke-dasharray="6,3"/>
  <text x="400" y="374" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#757575">mpsc channels (cross-context events)</text>
</svg>