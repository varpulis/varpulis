<svg xmlns="http://www.w3.org/2000/svg" width="700" height="450" viewBox="0 0 700 450">
  <!-- Background -->
  <rect width="700" height="450" fill="#FFFFFF"/>

  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#616161"/>
    </marker>
  </defs>

  <!-- DATA SOURCES label -->
  <text x="350" y="22" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#757575" text-anchor="middle">DATA SOURCES</text>

  <!-- Source box 1: Exchange APIs -->
  <rect x="40" y="32" width="180" height="46" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <text x="130" y="52" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Exchange APIs</text>
  <text x="130" y="68" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Binance, Kraken</text>

  <!-- Source box 2: Market Data Feeds -->
  <rect x="260" y="32" width="180" height="46" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <text x="350" y="52" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Market Data Feeds</text>
  <text x="350" y="68" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Bloomberg, Reuters</text>

  <!-- Source box 3: Historical -->
  <rect x="480" y="32" width="180" height="46" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <text x="570" y="52" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Historical</text>
  <text x="570" y="68" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Backfill</text>

  <!-- Arrows from sources down to CEP Engine -->
  <line x1="130" y1="78" x2="310" y2="118" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="350" y1="78" x2="350" y2="118" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="78" x2="390" y2="118" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Varpulis CEP Engine -->
  <rect x="225" y="120" width="250" height="50" rx="6" ry="6" fill="#1A73E8" stroke="#424242" stroke-width="1.5"/>
  <text x="350" y="148" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFFFFF" text-anchor="middle">Varpulis CEP Engine</text>

  <!-- Arrows from CEP to Indicator Streams and Pattern Matcher -->
  <line x1="290" y1="170" x2="200" y2="198" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="410" y1="170" x2="500" y2="198" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Indicator Streams -->
  <rect x="80" y="200" width="240" height="46" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <text x="200" y="220" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Indicator Streams</text>
  <text x="200" y="236" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">SMA, EMA, RSI, MACD, Bollinger</text>

  <!-- Pattern Matcher -->
  <rect x="380" y="200" width="240" height="46" rx="6" ry="6" fill="#E8F0FE" stroke="#424242" stroke-width="1.5"/>
  <text x="500" y="220" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Pattern Matcher</text>
  <text x="500" y="236" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Golden Cross, Death Cross, Squeeze</text>

  <!-- Arrows merging into Signals Aggregator -->
  <line x1="200" y1="246" x2="310" y2="280" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="500" y1="246" x2="390" y2="280" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Signals Aggregator -->
  <rect x="240" y="282" width="220" height="46" rx="6" ry="6" fill="#FFF3E0" stroke="#424242" stroke-width="1.5"/>
  <text x="350" y="302" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Signals Aggregator</text>
  <text x="350" y="318" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Confluence scoring, dedup</text>

  <!-- Arrows from Aggregator to outputs -->
  <line x1="280" y1="328" x2="130" y2="368" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="350" y1="328" x2="350" y2="368" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="420" y1="328" x2="570" y2="368" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- OUTPUTS label -->
  <text x="350" y="362" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#757575" text-anchor="middle">OUTPUTS</text>

  <!-- Output box 1: Kafka Topic -->
  <rect x="40" y="370" width="180" height="46" rx="6" ry="6" fill="#E8F5E9" stroke="#424242" stroke-width="1.5"/>
  <text x="130" y="390" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Kafka Topic</text>
  <text x="130" y="406" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">trading.signals</text>

  <!-- Output box 2: Webhook -->
  <rect x="260" y="370" width="180" height="46" rx="6" ry="6" fill="#E8F5E9" stroke="#424242" stroke-width="1.5"/>
  <text x="350" y="390" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Webhook / Bot</text>
  <text x="350" y="406" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Trading Bot API</text>

  <!-- Output box 3: Dashboard -->
  <rect x="480" y="370" width="180" height="46" rx="6" ry="6" fill="#E8F5E9" stroke="#424242" stroke-width="1.5"/>
  <text x="570" y="390" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121" text-anchor="middle">Dashboard Alerts</text>
  <text x="570" y="406" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="9" fill="#757575" text-anchor="middle">Real-time monitoring</text>
</svg>