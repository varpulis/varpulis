<svg xmlns="http://www.w3.org/2000/svg" width="700" height="400" viewBox="0 0 700 400">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#616161"/>
    </marker>
    <marker id="arrowhead-down" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#616161"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect x="0" y="0" width="700" height="400" fill="#FFFFFF"/>

  <!-- Coordinator box -->
  <rect x="175" y="20" width="350" height="120" rx="6" ry="6" fill="none" stroke="#424242" stroke-width="1.5"/>
  <rect x="175" y="20" width="350" height="30" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="175" y="38" width="350" height="12" fill="#1A73E8"/>
  <text x="350" y="42" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFFFFF">Coordinator (:9100)</text>

  <!-- Coordinator inner items -->
  <rect x="185" y="56" width="160" height="32" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="265" y="76" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Worker Registry</text>

  <rect x="355" y="56" width="160" height="32" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="435" y="76" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Pipeline Groups</text>

  <rect x="185" y="96" width="160" height="32" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="265" y="116" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Event Routing</text>

  <rect x="355" y="96" width="160" height="32" rx="4" ry="4" fill="#FFF3E0" stroke="#424242" stroke-width="1"/>
  <text x="435" y="116" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Health Monitor</text>

  <!-- Transport label -->
  <line x1="350" y1="140" x2="350" y2="210" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead-down)"/>
  <rect x="235" y="162" width="230" height="22" rx="4" ry="4" fill="#FFFFFF" stroke="none"/>
  <text x="350" y="178" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-style="italic" fill="#757575">REST or NATS transport</text>

  <!-- Worker 0 -->
  <rect x="40" y="215" width="180" height="100" rx="6" ry="6" fill="none" stroke="#424242" stroke-width="1.5"/>
  <rect x="40" y="215" width="180" height="28" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="40" y="231" width="180" height="12" fill="#1A73E8"/>
  <text x="130" y="235" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFFFFF">Worker 0 (:9000)</text>

  <rect x="52" y="250" width="156" height="24" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="130" y="266" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Pipeline</text>

  <rect x="52" y="280" width="156" height="24" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="130" y="296" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">CtxOrch</text>

  <!-- Worker 1 -->
  <rect x="260" y="215" width="180" height="100" rx="6" ry="6" fill="none" stroke="#424242" stroke-width="1.5"/>
  <rect x="260" y="215" width="180" height="28" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="260" y="231" width="180" height="12" fill="#1A73E8"/>
  <text x="350" y="235" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFFFFF">Worker 1 (:9001)</text>

  <rect x="272" y="250" width="156" height="24" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="350" y="266" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Pipeline</text>

  <rect x="272" y="280" width="156" height="24" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="350" y="296" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">CtxOrch</text>

  <!-- Worker N -->
  <rect x="480" y="215" width="180" height="100" rx="6" ry="6" fill="none" stroke="#424242" stroke-width="1.5"/>
  <rect x="480" y="215" width="180" height="28" rx="6" ry="6" fill="#1A73E8"/>
  <rect x="480" y="231" width="180" height="12" fill="#1A73E8"/>
  <text x="570" y="235" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFFFFF">Worker N (:900N)</text>

  <rect x="492" y="250" width="156" height="24" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="570" y="266" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">Pipeline</text>

  <rect x="492" y="280" width="156" height="24" rx="4" ry="4" fill="#E8F0FE" stroke="#424242" stroke-width="1"/>
  <text x="570" y="296" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="10" fill="#212121">CtxOrch</text>

  <!-- Coordinator arrows to workers -->
  <line x1="270" y1="140" x2="130" y2="213" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="430" y1="140" x2="570" y2="213" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>

  <!-- Bottom connection bar -->
  <rect x="30" y="340" width="640" height="40" rx="6" ry="6" fill="#FFF3E0" stroke="#424242" stroke-width="1.5"/>
  <text x="350" y="365" text-anchor="middle" font-family="Segoe UI, Roboto, Arial, sans-serif" font-size="11" font-weight="bold" fill="#212121">MQTT or NATS (inter-pipeline events)</text>

  <!-- Worker-to-bar connections -->
  <line x1="130" y1="315" x2="130" y2="338" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="350" y1="315" x2="350" y2="338" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="315" x2="570" y2="338" stroke="#616161" stroke-width="1.5" marker-end="url(#arrowhead)"/>
</svg>